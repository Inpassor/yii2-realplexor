/**
 * jquery-realplexor.js
 *
 * @author DmitryKoterov <dmitry.koterov@gmail.com>
 * @link https://github.com/DmitryKoterov/dklab_realplexor/blob/master/dklab_realplexor.js
 *
 * @author Inpassor <inpassor@yandex.com>
 * @link https://github.com/Inpassor/yii2-realplexor
 *
 * @version 0.1.1 (2016.10.10)
 */
(function(e,g,f){e.f=function(a){e.extend(!0,this,this.D,a||{});this.host=f.location.host;this.constructor.h||(this.constructor.h={});this.c="mpl"+(new Date).getTime();this.constructor.h[this.c]=this;if(!this.url.match(/^\w+:\/\/([^/]+)/))throw"Dklab_Realplexor constructor argument must be fully-qualified URL, "+this.url+" given.";a=RegExp.$1;if(a!=this.host&&a.lastIndexOf("."+this.host)!=a.length-this.host.length-1)throw"Due to the standard XMLHttpRequest security policy, hostname in URL passed to Dklab_Realplexor ("+
a+") must be equals to the current host ("+this.host+") or be its direct sub-domain.";this.F&&this.l();f.domain=host;return this};e.f.prototype={version:"1.32",url:"",host:"",u:"",a:{},g:null,o:null,c:null,m:!1,b:null,l:function(){e("<iframe/>",{id:this.c,onload:'$.Realplexor._iframeLoaded("'+this.c+'")',src:this.url+"?identifier=IFRAME&HOST="+this.host+"&version="+this.version}).B({position:"absolute",visibility:"hidden",width:"200px",height:"200px",left:"-1000px",top:"-1000px"}).A("body");this.m=
!0},subscribe:function(a,b){this.a[a]||(this.a[a]={cursor:null,i:[]});for(var c=this.a[a].i,d=0;d<c.length;d++)if(c[d]===b)return this;c.push(b);return this},unsubscribe:function(a,b){if(!this.a[a])return this;if(null==b)return this.a[a].i=[],this;for(var c=this.a[a].i,d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}return this},j:function(){this.m||this.l();this.b&&(clearTimeout(this.b),this.b=null);var a=this;if(!this.g)return this.b=setTimeout(function(){a.j()},30),this;this.g.j(this.a,this.constructor.s,
(null!=this.o?this.o+"_":"")+this.u);return this}};e.f.w=function(a){var b=this.h[a];setTimeout(function(){b.g=f.getElementById(a).contentWindow.v;b.C&&b.j()},50)};e.f.s=function(a,b){try{return a.apply(null,b),null}catch(c){return""+c}}})(jQuery,window,document);